<!doctype html>
<html>

<div id="form">

    <form id="options">

        Card:
        <select name="card_format" id="card_format">
                <option value="a6_foldout">a6 foldout</option>
                <option value="a6_single">a6 single</option>
            </select> Card texture:
        <select name="card_texture" id="card_texture">
                <option value="pearlescent_card">pearlescent_card</option>
                <option value="hammered_card_300">hammered_card</option>
                <option value="linen_card">linen card</option>
                <option value="white_card_200">white_card_200</option>
                <option value="white_card_400">white_card_400</option>
            </select> Envelope:
        <select name="envelope_style" id="envelope_style">
                <option value="standard_envelope">standard_envelope</option>
                <option value="box_envelope"></option>
            </select> Embellishment:
        <select name="embellishment" id="embellishment">
                <option value="wrap">wrap</option>
                <option value="acrylic_buckle">acrylic_buckle</option>
                <option value="acrylic_heart">acrylic_heart</option>
                <option value="diamante_buckle">diamante_buckle</option>
                <option value="diamante_circle">diamante_circle</option>
                <option value="diamante_buckle">diamante_buckle</option>
            </select>

    </form>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>

<script>
    $(function() {
        var items = {
            "glue_dots": {
                "quantity": 200,
                "price": 1
            },
            "ribbon": {
                "quantity": 40,
                "price": 1.95
            },
            "pearlescent_card": {
                "quantity": 100,
                "price": 25.90
            },
            "pearlsecent_paper": {
                "quantity": 100,
                "price": 21.60
            },
            "white_card_400": {},
            "white_card_200": {
                "quantity": 30,
                "price": 1
            },
            "tissue_paper": {},
            "vellum": {
                "quantity": 500,
                "price": 25.70
            },
            "diamante_heart": {},
            "diamante_circle": {},
            "diamante_buckle": {},
            "acrylic_buckle": {},
            "acrylic_heart": {},
            "linen_300": {
                "quantity": 100,
                "price": 21.80
            },
            "kraft_300": {},
            "linen_paper": {},
            "hammered_300": {},
            "hammered_paper": {
                "quantity": 100,
                "price": 8.57
            }
        };

        var products = {
            "box_envelope": 1,
            "a6_single": 0.25,
            "a6_foldout": 0.5,
            "tissue": 0.25,
            "vellum": 0.5,
            "box_envelope": 1,
            "envelope": 1,
            "rsvp": (1 / 8),
            "info_card": 0.25
        }

        var card_formats = ["a6_single", "a6_foldout"]

        var card_textures = ["pearlescent_card", "pearlescent_paper", "white_card_400", "white_card_300", "white_card_200"]

        var card = "a6_foldout";
        var card_texture = ["pearlescent_card"];
        var extras = ["rsvp", "box_envelope", "ribbon", "vellum", "tissue"]

        var Calculator = Backbone.Model.extend({
            initialize: function() {
                this.on("change", this.calculatePrice)
            },
            defaults: {
                card_format: "a6_foldout",
                card_texture: "white_card_200",
                envelope_style: "box_envelope",
                embellishment: false
            },
            calculatePrice: function() {
              console.log("calculating")
                var total = 0;
                var card_texture = this.get("card_texture")
                var cost_per_sheet = items[card_texture]["price"]/ items[card_texture]["quantity"];
               
                cost_per_card = cost_per_sheet * products[this.get("card_format")];
                total = total + cost_per_card;
                
                var envelope_style = this.get("envelope_style")
                var cost_per_envelope = items[]
            }
        })

        var calculator = new Calculator();

        var FormView = Backbone.View.extend({
            initialize: function() {},
            el: '#options',
            events: {
                'change select': 'changeCardFormat'
                
            },
            changeCardFormat: function(e) {
                var currentTarget = $(e.currentTarget)
                calculator.set(currentTarget.attr('id'), currentTarget.val())
                console.log(currentTarget.attr('id'), currentTarget.val())
                
                calculator.trigger("change")
            },
            render: function() {

            }
        })
        var fv = new FormView();
    })
</script>


</html>